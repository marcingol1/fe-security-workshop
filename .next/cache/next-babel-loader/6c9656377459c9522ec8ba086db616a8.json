{"ast":null,"code":"import fetch from 'isomorphic-unfetch';\nexport default (async (req, res) => {\n  const {\n    username\n  } = await req.body;\n  console.log(username);\n  const url = `https://api.github.com/users/${username.split(' ')[0]}`;\n\n  try {\n    const response = await fetch(url);\n\n    if (response.ok) {\n      const {\n        id\n      } = await response.json();\n      return res.status(200).json({\n        token: id\n      });\n    } else {\n      // https://github.com/developit/unfetch#caveats\n      const error = new Error(response.statusText);\n      error.response = response;\n      throw error;\n    }\n  } catch (error) {\n    const {\n      response\n    } = error;\n    return response ? res.status(response.status).json({\n      message: response.statusText\n    }) : res.status(400).json({\n      message: error.message\n    });\n  }\n});","map":{"version":3,"sources":["/Users/marcingol/Desktop/hello-world (1)/pages/api/login.js"],"names":["fetch","req","res","username","body","console","log","url","split","response","ok","id","json","status","token","error","Error","statusText","message"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,oBAAlB;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACjC,QAAM;AAAEC,IAAAA;AAAF,MAAe,MAAMF,GAAG,CAACG,IAA/B;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AACA,QAAMI,GAAG,GAAI,gCAA+BJ,QAAQ,CAACK,KAAT,CAAe,GAAf,EAAoB,CAApB,CAAuB,EAAnE;;AAEA,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAMT,KAAK,CAACO,GAAD,CAA5B;;AAEA,QAAIE,QAAQ,CAACC,EAAb,EAAiB;AACf,YAAM;AAAEC,QAAAA;AAAF,UAAS,MAAMF,QAAQ,CAACG,IAAT,EAArB;AACA,aAAOV,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEE,QAAAA,KAAK,EAAEH;AAAT,OAArB,CAAP;AACD,KAHD,MAGO;AACL;AACA,YAAMI,KAAK,GAAG,IAAIC,KAAJ,CAAUP,QAAQ,CAACQ,UAAnB,CAAd;AACAF,MAAAA,KAAK,CAACN,QAAN,GAAiBA,QAAjB;AACA,YAAMM,KAAN;AACD;AACF,GAZD,CAYE,OAAOA,KAAP,EAAc;AACd,UAAM;AAAEN,MAAAA;AAAF,QAAeM,KAArB;AACA,WAAON,QAAQ,GACXP,GAAG,CAACW,MAAJ,CAAWJ,QAAQ,CAACI,MAApB,EAA4BD,IAA5B,CAAiC;AAAEM,MAAAA,OAAO,EAAET,QAAQ,CAACQ;AAApB,KAAjC,CADW,GAEXf,GAAG,CAACW,MAAJ,CAAW,GAAX,EAAgBD,IAAhB,CAAqB;AAAEM,MAAAA,OAAO,EAAEH,KAAK,CAACG;AAAjB,KAArB,CAFJ;AAGD;AACF,CAvBD","sourcesContent":["import fetch from 'isomorphic-unfetch';\n\nexport default async (req, res) => {\n  const { username } = await req.body;\n  console.log(username);\n  const url = `https://api.github.com/users/${username.split(' ')[0]}`;\n\n  try {\n    const response = await fetch(url);\n\n    if (response.ok) {\n      const { id } = await response.json();\n      return res.status(200).json({ token: id });\n    } else {\n      // https://github.com/developit/unfetch#caveats\n      const error = new Error(response.statusText);\n      error.response = response;\n      throw error;\n    }\n  } catch (error) {\n    const { response } = error;\n    return response\n      ? res.status(response.status).json({ message: response.statusText })\n      : res.status(400).json({ message: error.message });\n  }\n};\n"]},"metadata":{},"sourceType":"module"}