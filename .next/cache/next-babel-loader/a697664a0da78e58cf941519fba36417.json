{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Object$assign from \"@babel/runtime-corejs2/core-js/object/assign\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/marcingol/Desktop/hello-world (1)/pages/login.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport Layout from '../components/layout';\nimport { login } from '../utils/auth';\n\nfunction Login() {\n  var _useState = useState({\n    username: '',\n    error: ''\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      userData = _useState2[0],\n      setUserData = _useState2[1];\n\n  function handleSubmit(_x) {\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  function _handleSubmit() {\n    _handleSubmit = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(event) {\n      var username, url, response, _ref, token, error, _response;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              setUserData(_Object$assign({}, userData, {\n                error: ''\n              }));\n              username = userData.username;\n              url = '/api/login';\n              _context.prev = 4;\n              _context.next = 7;\n              return fetch(url, {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: _JSON$stringify({\n                  username: username\n                })\n              });\n\n            case 7:\n              response = _context.sent;\n\n              if (!(response.status === 200)) {\n                _context.next = 17;\n                break;\n              }\n\n              _context.next = 11;\n              return response.json();\n\n            case 11:\n              _ref = _context.sent;\n              token = _ref.token;\n              _context.next = 15;\n              return login({\n                token: token\n              });\n\n            case 15:\n              _context.next = 21;\n              break;\n\n            case 17:\n              console.log('Login failed.'); // https://github.com/developit/unfetch#caveats\n\n              error = new Error(response.statusText);\n              error.response = response;\n              throw error;\n\n            case 21:\n              _context.next = 28;\n              break;\n\n            case 23:\n              _context.prev = 23;\n              _context.t0 = _context[\"catch\"](4);\n              console.error('You have an error in your code or there are Network issues.', _context.t0);\n              _response = _context.t0.response;\n              setUserData(_Object$assign({}, userData, {\n                error: _response ? _response.statusText : _context.t0.message\n              }));\n\n            case 28:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 23]]);\n    }));\n    return _handleSubmit.apply(this, arguments);\n  }\n\n  return React.createElement(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"jsx-1828860322\" + \" \" + \"login\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    htmlFor: \"username\",\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, \"GitHub username\"), React.createElement(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    name: \"username\",\n    value: userData.username,\n    onChange: function onChange(event) {\n      return setUserData(_Object$assign({}, userData, {\n        username: event.target.value\n      }));\n    },\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"jsx-1828860322\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Login\"), userData.error && React.createElement(\"p\", {\n    className: \"jsx-1828860322\" + \" \" + \"error\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"Error: \", userData.error))), React.createElement(_JSXStyle, {\n    id: \"1828860322\",\n    __self: this\n  }, \".login.jsx-1828860322{max-width:340px;margin:0 auto;padding:1rem;border:1px solid #ccc;border-radius:4px;}form.jsx-1828860322{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;}label.jsx-1828860322{font-weight:600;}input.jsx-1828860322{padding:8px;margin:0.3rem 0 1rem;border:1px solid #ccc;border-radius:4px;}.error.jsx-1828860322{margin:0.5rem 0 0;color:brown;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXJjaW5nb2wvRGVza3RvcC9oZWxsby13b3JsZCAoMSkvcGFnZXMvbG9naW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBc0VrQixBQUcyQixBQU9ILEFBSUcsQUFHSixBQU1NLFlBTEcsSUFkUCxBQVdoQixFQVNjLFlBbkJDLEFBb0JmLEdBTndCLFVBYkEsWUFjSixVQWJBLFFBY3BCLENBVm1CLFNBSG5CLHNEQUlBIiwiZmlsZSI6Ii9Vc2Vycy9tYXJjaW5nb2wvRGVza3RvcC9oZWxsby13b3JsZCAoMSkvcGFnZXMvbG9naW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgZmV0Y2ggZnJvbSAnaXNvbW9ycGhpYy11bmZldGNoJztcbmltcG9ydCBMYXlvdXQgZnJvbSAnLi4vY29tcG9uZW50cy9sYXlvdXQnO1xuaW1wb3J0IHsgbG9naW4gfSBmcm9tICcuLi91dGlscy9hdXRoJztcblxuZnVuY3Rpb24gTG9naW4oKSB7XG4gIGNvbnN0IFt1c2VyRGF0YSwgc2V0VXNlckRhdGFdID0gdXNlU3RhdGUoeyB1c2VybmFtZTogJycsIGVycm9yOiAnJyB9KTtcblxuICBhc3luYyBmdW5jdGlvbiBoYW5kbGVTdWJtaXQoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNldFVzZXJEYXRhKE9iamVjdC5hc3NpZ24oe30sIHVzZXJEYXRhLCB7IGVycm9yOiAnJyB9KSk7XG5cbiAgICBjb25zdCB1c2VybmFtZSA9IHVzZXJEYXRhLnVzZXJuYW1lO1xuICAgIGNvbnN0IHVybCA9ICcvYXBpL2xvZ2luJztcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcblxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyB1c2VybmFtZSB9KVxuICAgICAgfSk7XG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgY29uc3QgeyB0b2tlbiB9ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBhd2FpdCBsb2dpbih7IHRva2VuIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0xvZ2luIGZhaWxlZC4nKTtcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2RldmVsb3BpdC91bmZldGNoI2NhdmVhdHNcbiAgICAgICAgbGV0IGVycm9yID0gbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1c1RleHQpO1xuICAgICAgICBlcnJvci5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgJ1lvdSBoYXZlIGFuIGVycm9yIGluIHlvdXIgY29kZSBvciB0aGVyZSBhcmUgTmV0d29yayBpc3N1ZXMuJyxcbiAgICAgICAgZXJyb3JcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHsgcmVzcG9uc2UgfSA9IGVycm9yO1xuICAgICAgc2V0VXNlckRhdGEoXG4gICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHVzZXJEYXRhLCB7XG4gICAgICAgICAgZXJyb3I6IHJlc3BvbnNlID8gcmVzcG9uc2Uuc3RhdHVzVGV4dCA6IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8TGF5b3V0PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2dpblwiPlxuICAgICAgICA8Zm9ybSBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cbiAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInVzZXJuYW1lXCI+R2l0SHViIHVzZXJuYW1lPC9sYWJlbD5cblxuICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgdHlwZT1cInRleHRcIlxuICAgICAgICAgICAgaWQ9XCJ1c2VybmFtZVwiXG4gICAgICAgICAgICBuYW1lPVwidXNlcm5hbWVcIlxuICAgICAgICAgICAgdmFsdWU9e3VzZXJEYXRhLnVzZXJuYW1lfVxuICAgICAgICAgICAgb25DaGFuZ2U9e2V2ZW50ID0+XG4gICAgICAgICAgICAgIHNldFVzZXJEYXRhKFxuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHVzZXJEYXRhLCB7IHVzZXJuYW1lOiBldmVudC50YXJnZXQudmFsdWUgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIC8+XG5cbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj5Mb2dpbjwvYnV0dG9uPlxuXG4gICAgICAgICAge3VzZXJEYXRhLmVycm9yICYmIDxwIGNsYXNzTmFtZT1cImVycm9yXCI+RXJyb3I6IHt1c2VyRGF0YS5lcnJvcn08L3A+fVxuICAgICAgICA8L2Zvcm0+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLmxvZ2luIHtcbiAgICAgICAgICBtYXgtd2lkdGg6IDM0MHB4O1xuICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICAgIHBhZGRpbmc6IDFyZW07XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgIH1cbiAgICAgICAgZm9ybSB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWZsb3c6IGNvbHVtbjtcbiAgICAgICAgfVxuICAgICAgICBsYWJlbCB7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgfVxuICAgICAgICBpbnB1dCB7XG4gICAgICAgICAgcGFkZGluZzogOHB4O1xuICAgICAgICAgIG1hcmdpbjogMC4zcmVtIDAgMXJlbTtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgfVxuICAgICAgICAuZXJyb3Ige1xuICAgICAgICAgIG1hcmdpbjogMC41cmVtIDAgMDtcbiAgICAgICAgICBjb2xvcjogYnJvd247XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L0xheW91dD5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgTG9naW47XG4iXX0= */\\n/*@ sourceURL=/Users/marcingol/Desktop/hello-world (1)/pages/login.js */\"));\n}\n\nexport default Login;","map":{"version":3,"sources":["/Users/marcingol/Desktop/hello-world (1)/pages/login.js"],"names":["React","useState","fetch","Layout","login","Login","username","error","userData","setUserData","handleSubmit","event","preventDefault","url","method","headers","body","response","status","json","token","console","log","Error","statusText","message","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport fetch from 'isomorphic-unfetch';\nimport Layout from '../components/layout';\nimport { login } from '../utils/auth';\n\nfunction Login() {\n  const [userData, setUserData] = useState({ username: '', error: '' });\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    setUserData(Object.assign({}, userData, { error: '' }));\n\n    const username = userData.username;\n    const url = '/api/login';\n\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username })\n      });\n      if (response.status === 200) {\n        const { token } = await response.json();\n        await login({ token });\n      } else {\n        console.log('Login failed.');\n        // https://github.com/developit/unfetch#caveats\n        let error = new Error(response.statusText);\n        error.response = response;\n        throw error;\n      }\n    } catch (error) {\n      console.error(\n        'You have an error in your code or there are Network issues.',\n        error\n      );\n\n      const { response } = error;\n      setUserData(\n        Object.assign({}, userData, {\n          error: response ? response.statusText : error.message\n        })\n      );\n    }\n  }\n\n  return (\n    <Layout>\n      <div className=\"login\">\n        <form onSubmit={handleSubmit}>\n          <label htmlFor=\"username\">GitHub username</label>\n\n          <input\n            type=\"text\"\n            id=\"username\"\n            name=\"username\"\n            value={userData.username}\n            onChange={event =>\n              setUserData(\n                Object.assign({}, userData, { username: event.target.value })\n              )\n            }\n          />\n\n          <button type=\"submit\">Login</button>\n\n          {userData.error && <p className=\"error\">Error: {userData.error}</p>}\n        </form>\n      </div>\n      <style jsx>{`\n        .login {\n          max-width: 340px;\n          margin: 0 auto;\n          padding: 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        form {\n          display: flex;\n          flex-flow: column;\n        }\n        label {\n          font-weight: 600;\n        }\n        input {\n          padding: 8px;\n          margin: 0.3rem 0 1rem;\n          border: 1px solid #ccc;\n          border-radius: 4px;\n        }\n        .error {\n          margin: 0.5rem 0 0;\n          color: brown;\n        }\n      `}</style>\n    </Layout>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}